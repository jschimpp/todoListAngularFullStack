{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport axios from 'axios';\nimport * as i0 from \"@angular/core\";\nclass DataSharingService {\n  constructor() {\n    this.tasksArraySubject = new BehaviorSubject([]);\n    this.tasks$ = this.tasksArraySubject.asObservable();\n  }\n  getTasks() {\n    axios.get('http://localhost:8080/tasks').then(response => {\n      const data = response.data;\n      this.tasksArraySubject.next(data);\n    }).catch(() => {\n      alert('Data Not Received');\n    });\n  }\n  addTask(task) {\n    const payload = {\n      taskName: task.taskName,\n      completed: false\n    };\n    axios({\n      url: 'http://localhost:8080/tasks/save',\n      method: 'POST',\n      data: payload\n    }).then(() => {\n      console.log('Saved');\n    }).catch(() => {\n      console.log('Failed to Save');\n    });\n    const currentTasks = this.tasksArraySubject.value;\n    const updatedTasks = [...currentTasks, task];\n    this.tasksArraySubject.next(updatedTasks);\n  }\n  toggleComplete(_id) {\n    this.tasks$.subscribe(tasks => {\n      const task = tasks.find(item => item._id === _id);\n      if (task) {\n        axios.put(`http://localhost:8080/tasks/${_id}`, {\n          completed: !task.completed\n        }).then(() => {\n          console.log('Successfully Updated');\n        }).catch(() => {\n          console.log('Failed to Update');\n        });\n      }\n    });\n  }\n  delete(_id) {\n    axios.delete(`http://localhost:8080/tasks/${_id}`).then(() => {\n      console.log('Successfully Deleted');\n      this.getTasks();\n    }).catch(() => {\n      console.log('Failed to Delete');\n    });\n  }\n}\nDataSharingService.ɵfac = function DataSharingService_Factory(t) {\n  return new (t || DataSharingService)();\n};\nDataSharingService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DataSharingService,\n  factory: DataSharingService.ɵfac,\n  providedIn: 'root'\n});\nexport { DataSharingService };","map":{"version":3,"names":["BehaviorSubject","axios","DataSharingService","constructor","tasksArraySubject","tasks$","asObservable","getTasks","get","then","response","data","next","catch","alert","addTask","task","payload","taskName","completed","url","method","console","log","currentTasks","value","updatedTasks","toggleComplete","_id","subscribe","tasks","find","item","put","delete","factory","ɵfac","providedIn"],"sources":["C:\\Users\\joesc\\Documents\\angular\\todolist2axios\\client\\src\\app\\rxjs\\DataService.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { TaskItem } from '../models/taskItem';\r\nimport axios from 'axios';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DataSharingService {\r\n  private tasksArraySubject = new BehaviorSubject<any[]>([]);\r\n\r\n  tasks$ = this.tasksArraySubject.asObservable();\r\n\r\n  getTasks() {\r\n    axios.get('http://localhost:8080/tasks')\r\n    .then((response) => {\r\n      const data = response.data;\r\n      this.tasksArraySubject.next(data);\r\n    })\r\n    .catch(() => {\r\n      alert('Data Not Received')\r\n    })\r\n  }\r\n\r\n  addTask(task: any) {\r\n    const payload = {\r\n      taskName: task.taskName,\r\n      completed: false\r\n    }\r\n    axios({\r\n      url: 'http://localhost:8080/tasks/save',\r\n      method: 'POST',\r\n      data: payload\r\n    })\r\n    .then(() => {\r\n      console.log('Saved')\r\n    })\r\n    .catch(() => {\r\n      console.log('Failed to Save')\r\n    })\r\n    const currentTasks = this.tasksArraySubject.value;\r\n    const updatedTasks = [...currentTasks, task];\r\n    this.tasksArraySubject.next(updatedTasks);\r\n  }\r\n  \r\n  toggleComplete(_id: string) {\r\n    this.tasks$.subscribe((tasks) => {\r\n      const task: TaskItem = tasks.find((item: TaskItem) => item._id === _id);\r\n      if (task) {\r\n        axios.put(`http://localhost:8080/tasks/${_id}`, { completed: !task.completed })\r\n        .then(() => {\r\n          console.log('Successfully Updated')\r\n        })\r\n        .catch(() => {\r\n          console.log('Failed to Update')\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  delete(_id: string) {\r\n    axios.delete(`http://localhost:8080/tasks/${_id}`)\r\n    .then(() => {\r\n      console.log('Successfully Deleted')\r\n      this.getTasks()\r\n    })\r\n    .catch(() => {\r\n      console.log('Failed to Delete')\r\n    })\r\n  }\r\n}\r\n"],"mappings":"AACA,SAASA,eAAe,QAAQ,MAAM;AAEtC,OAAOC,KAAK,MAAM,OAAO;;AAEzB,MAGaC,kBAAkB;EAH/BC,YAAA;IAIU,KAAAC,iBAAiB,GAAG,IAAIJ,eAAe,CAAQ,EAAE,CAAC;IAE1D,KAAAK,MAAM,GAAG,IAAI,CAACD,iBAAiB,CAACE,YAAY,EAAE;;EAE9CC,QAAQA,CAAA;IACNN,KAAK,CAACO,GAAG,CAAC,6BAA6B,CAAC,CACvCC,IAAI,CAAEC,QAAQ,IAAI;MACjB,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAI;MAC1B,IAAI,CAACP,iBAAiB,CAACQ,IAAI,CAACD,IAAI,CAAC;IACnC,CAAC,CAAC,CACDE,KAAK,CAAC,MAAK;MACVC,KAAK,CAAC,mBAAmB,CAAC;IAC5B,CAAC,CAAC;EACJ;EAEAC,OAAOA,CAACC,IAAS;IACf,MAAMC,OAAO,GAAG;MACdC,QAAQ,EAAEF,IAAI,CAACE,QAAQ;MACvBC,SAAS,EAAE;KACZ;IACDlB,KAAK,CAAC;MACJmB,GAAG,EAAE,kCAAkC;MACvCC,MAAM,EAAE,MAAM;MACdV,IAAI,EAAEM;KACP,CAAC,CACDR,IAAI,CAAC,MAAK;MACTa,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;IACtB,CAAC,CAAC,CACDV,KAAK,CAAC,MAAK;MACVS,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC/B,CAAC,CAAC;IACF,MAAMC,YAAY,GAAG,IAAI,CAACpB,iBAAiB,CAACqB,KAAK;IACjD,MAAMC,YAAY,GAAG,CAAC,GAAGF,YAAY,EAAER,IAAI,CAAC;IAC5C,IAAI,CAACZ,iBAAiB,CAACQ,IAAI,CAACc,YAAY,CAAC;EAC3C;EAEAC,cAAcA,CAACC,GAAW;IACxB,IAAI,CAACvB,MAAM,CAACwB,SAAS,CAAEC,KAAK,IAAI;MAC9B,MAAMd,IAAI,GAAac,KAAK,CAACC,IAAI,CAAEC,IAAc,IAAKA,IAAI,CAACJ,GAAG,KAAKA,GAAG,CAAC;MACvE,IAAIZ,IAAI,EAAE;QACRf,KAAK,CAACgC,GAAG,CAAC,+BAA+BL,GAAG,EAAE,EAAE;UAAET,SAAS,EAAE,CAACH,IAAI,CAACG;QAAS,CAAE,CAAC,CAC9EV,IAAI,CAAC,MAAK;UACTa,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;QACrC,CAAC,CAAC,CACDV,KAAK,CAAC,MAAK;UACVS,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QACjC,CAAC,CAAC;;IAEN,CAAC,CAAC;EACJ;EAEAW,MAAMA,CAACN,GAAW;IAChB3B,KAAK,CAACiC,MAAM,CAAC,+BAA+BN,GAAG,EAAE,CAAC,CACjDnB,IAAI,CAAC,MAAK;MACTa,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,IAAI,CAAChB,QAAQ,EAAE;IACjB,CAAC,CAAC,CACDM,KAAK,CAAC,MAAK;MACVS,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IACjC,CAAC,CAAC;EACJ;;AA7DWrB,kBAAkB,C;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB,C;SAAlBA,kBAAkB;EAAAiC,OAAA,EAAlBjC,kBAAkB,CAAAkC,IAAA;EAAAC,UAAA,EAFjB;AAAM;SAEPnC,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}